<!DOCTYPE html>

<html lang="en">

    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

        <meta name="viewport" content="initial-scale=1, width=device-width">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/3.0.1/js.cookie.min.js"></script>

        <link rel="shortcut icon" href="static/favicon.png" type="image/png"/>

        <link href="/static/styles.css" rel="stylesheet">

        <script src="https://cdnjs.cloudflare.com/ajax/libs/particlesjs/2.2.2/particles.min.js"></script>

        <title>ReLinked : {% block title %}{% endblock %}</title>
        {% block script %}{% endblock %}

        <script>
                var red = ['#FF033E','#ED2939','grey','black','#F40009','#E25822'];
                function particle(){
                    Particles.init({
                        selector: '.background',
                        color: red,
                        sizeVariations: 2.5,
                        maxParticles: 120
                    });
                }

                function checkcookie(){
                check = Cookies.get('mode');
                if (check === 'darkmode'){
                    sunset();
                }
                else if (check === 'lightmode')
                {
                    sunrise();
                }
                else
                {
                    Cookies.set('mode','lightmode', { expires: 365 })
                }
                }


            function sunset(){
                    Cookies.set('mode','darkmode', { expires: 365 })
                    document.getElementById("btn-outline-dark").innerHTML = "Turn on Light mode";
                    document.getElementById("btn-outline-dark").style.backgroundColor = "white";
                    document.getElementById("btn-outline-dark").classList.replace('btn-dark','btn-light');
                    document.getElementById("navbar1").classList.replace('navbar-light','navbar-dark');
                    document.getElementById("navbar1").style.backgroundColor = "#404040";

                    body = document.getElementsByTagName("body");
                    for (let i = 0; i < body.length; i++){
                        body[i].style.backgroundColor = "#151515";
                    }

                    p = document.getElementsByTagName("p");
                    for (let i = 0; i < p.length; i++){
                        p[i].style.color = "white";
                    }

                    ul = document.getElementsByTagName("ul");
                    for (let i = 0; i < ul.length; i++){
                        ul[i].style.color = "white";
                    }

                    btn = document.getElementsByClassName("btn1");
                    for (let i = 0; i < btn.length; i++){
                        btn[i].style.backgroundColor = "#ED2939";
                        btn[i].style.borderColor = "black";
                        btn[i].style.color = "black";
                    }

                    hr = document.getElementsByTagName("hr");
                    for (let i = 0; i < hr.length; i++){
                        hr[i].style.color = "#EBEBEB";
                    }

                    text = document.getElementsByClassName("text");
                    for (let i = 0; i < text.length; i++){
                        text[i].style.color = "#EDEADE";
                    }

                    accord = document.getElementsByClassName("accordion-button");
                    accord2 = document.getElementsByClassName("accordion-item");
                    for (let i = 0; i < accord.length; i++){
                        accord[i].style.backgroundColor = "#454040";
                        accord2[i].style.backgroundColor = "#595454";
                        accord2[i].style.borderColor = "black";
                    }

                    card = document.getElementsByClassName("card2");
                    for (let i = 0; i < card.length; i++){
                        card[i].style.backgroundColor = "#434040";
                        card[i].style.borderColor = "black";
                    }

                    var card1 = document.getElementsByClassName("card3");
                    for (let i = 0; i < card1.length; i++){
                        card1[i].style.backgroundColor = "#181818";
                        card1[i].style.borderColor = "black";
                    }

                    search = document.getElementsByClassName("search1");
                    for (let i = 0; i < search.length; i++){
                        search[i].style.backgroundColor = "#434040";
                        search[i].style.borderColor = "black";
                        search[i].style.color = "#EDEADE";
                    }

                    logo = document.getElementById("red").style.color = "#ED2939";


                    document.getElementById("btn-outline-dark").setAttribute('onclick','sunrise();')
            }

            function sunrise(){
                    Cookies.set('mode','lightmode', { expires: 365 })
                    document.getElementById("btn-outline-dark").innerHTML = "Turn on Dark mode";
                    document.getElementById("btn-outline-dark").style.backgroundColor = "black";
                    document.getElementById("btn-outline-dark").classList.replace('btn-light','btn-dark');
                    document.getElementById("navbar1").classList.replace('navbar-dark','navbar-light');
                    document.getElementById("navbar1").style.backgroundColor = "white";

                    body = document.getElementsByTagName("body");
                    for (let i = 0; i < body.length; i++){
                        body[i].style.backgroundColor = "#EFEFEF";
                    }

                    ul = document.getElementsByTagName("ul");
                    for (let i = 0; i < ul.length; i++){
                        ul[i].style.color = "black";
                    }

                    p = document.getElementsByTagName("p");
                    for (let i = 0; i < p.length; i++){
                        p[i].style.color = "black";
                    }

                    btn = document.getElementsByClassName("btn1");
                    for (let i = 0; i < btn.length; i++){
                        btn[i].style.backgroundColor = "#EF0107";
                        btn[i].style.borderColor = "white";
                        btn[i].style.color = "white";
                    }

                    hr = document.getElementsByTagName("hr");
                    for (let i = 0; i < hr.length; i++){
                        hr[i].style.color = "black";
                    }

                    text = document.getElementsByClassName("text");
                    for (let i = 0; i < text.length; i++){
                        text[i].style.color = "black";
                    }

                    accord = document.getElementsByClassName("accordion-button");
                    accord2 = document.getElementsByClassName("accordion-item");
                    for (let i = 0; i < accord2.length; i++){
                        accord[i].style.backgroundColor = "#F9967A";
                        accord2[i].style.backgroundColor = "#FBCEB1";
                        accord2[i].style.borderColor = "grey";
                    }

                    var card = document.getElementsByClassName("card2");
                    for (let i = 0; i < card.length; i++){
                        card[i].style.backgroundColor = "#FAF9F6";
                        card[i].style.borderColor = "grey";
                    }

                    var card1 = document.getElementsByClassName("card3");
                    for (let i = 0; i < card1.length; i++){
                        card1[i].style.backgroundColor = "white";
                        card1[i].style.borderColor = "grey";
                    }


                    search = document.getElementsByClassName("search1");
                    for (let i = 0; i < search.length; i++){
                        search[i].style.backgroundColor = "#FAF9F6";
                        search[i].style.borderColor = "grey";
                        search[i].style.color = "black";
                    }

                    document.getElementById("btn-outline-dark").setAttribute('onclick','sunset();')
            }

            window.addEventListener("load",checkcookie);
            window.addEventListener("load",particle);

        </script>
    </head>

    <body class="lightmodebackground" id="background">
        <nav class="navbar navbar-expand-md navbar-light" id="navbar1" >
            <div class="container-fluid">
                <a class="navbar-brand" href="/">
                    <img src="static/logo.png" width="53" height="53" class="d-inline-block align-top">
                    <span class="red" id="red">ReLinked</span>
                </a>
                <button aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-bs-target="#navbar" data-bs-toggle="collapse" type="button">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbar">
                    {% if session["user_id"] %}
                        <ul class="navbar-nav me-auto mt-2">
                            <hr>
                            <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                            <li class="nav-item"><a class="nav-link" href="/add">Add link</a></li>
                            <li class="nav-item"><a class="nav-link" href="/createnode">Create a ReNode</a></li>
                            <li class="nav-item"><a class="nav-link" href="/editrenode">Edit ReNode</a></li>
                            <li class="nav-item"><a class="nav-link" href="/editlink">Edit Link</a></li>
                            <li class="nav-item"><a class="nav-link" href="/guide">Guide</a></li>
                            <li class="nav-item"><a class="nav-link" href="/changepass">Change password</a></li>
                            <li class="nav-item"><a class="nav-link" href="/changeuser">Change username</a></li>
                            <hr>
                            <div>
                                <button type="button" onclick="sunset();" style="background-color: black;" id = "btn-outline-dark" class="btn btn-dark">Turn on Dark mode</button>
                            </div>
                        </ul><hr>
                        <ul class="navbar-nav ms-auto mt-2">
                            <li class="nav-item"><a class="nav-link" href="/logout">Log Out</a></li>
                        </ul>
                    {% else %}
                        <hr>
                        <div>
                            <button type="button" onclick="sunset();" style="background-color: black;" id = "btn-outline-dark" class="btn btn-dark">Turn on Dark mode</button>
                        </div>
                        <hr>
                        <ul class="navbar-nav ms-auto mt-2">
                            <li class="nav-item"><a class="nav-link" href="/register">Register</a></li>
                            <li class="nav-item"><a class="nav-link" href="/login">Log In</a></li>
                        </ul>
                    {% endif %}
                </div>
            </div>
        </nav>
        <main class="container-fluid py-3 text-center">
            {% block main %}{% endblock %}
        </main>
        <footer class="mb-3 small text-center text-muted">
            A CS50 project by <b>KrossKinetic</b>.
        </footer>
        <canvas class="background"></canvas>
    </body>

</html>